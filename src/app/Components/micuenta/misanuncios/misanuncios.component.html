<div class="container p-0">
  <legend class="text-center text-primary mb-3"><h1 class="display-4">Mis anuncios</h1></legend>

    <div class="form-group row mb-3 px-2">
      <div class="col-md-1 px-0">
          <a class="btn btn-primary btn-sm" style="border-radius:25px;" (click)="agregarAnuncio()">
              <span class="col-md-1 col-md-offset-2 text-center">
              <i class="fa fa-add bigicon" aria-hidden="true"> </i>
          </span></a>
      </div>
      <div class="col-md-8 px-0"></div>
      <div class="col-md-3 p-0 text-end">
        <label class="text-primary text-end px-3">Total de registros: {{_paginadoDetalle.TotalRegistros}}</label>
        <button class="btn btn-primary btn-sm br25" (click)="mostrarFiltros()">
            <span class="col-md-1 text-center">
              <i [ngClass]="{' fa-regular fa-eye': _mostrarFiltros, ' fa-solid fa-eye-slash': !_mostrarFiltros}" ></i>
            </span>
        </button>
      </div>
    </div>

    <div class="row">

      <div [ngClass]="{' col-md-9': _mostrarFiltros, ' col-md-12': !_mostrarFiltros}">
        <div class="row mb-3" *ngFor="let publicacion of _publicaciones" >
                <app-anuncio-miniatura [_publicacion]="publicacion" [_tipoBusqueda]="_misAnuncios" (_seEliminoPublicacion)="ejecutarConsulta(0)" (_seCanceloPublicacion)="cancelarPublicacion(publicacion)" (_seEligeCopiar)="copiarAnuncio(publicacion)"></app-anuncio-miniatura>
        </div>
      </div>

      <div [ngClass]="{' col-md-3': _mostrarFiltros, ' col-md-0': !_mostrarFiltros}" [ngStyle]="{'display': !_mostrarFiltros ? 'none' : 'inline' }" >
        <div class="sticky-md-top text-primary br15" style="top:70px; left:10px; border: 1px solid">
          <div class="row px-3" >
              <div class="row">
                <div class="col-md-8">
                  <h3 class="text-primary text-center">Filtros</h3>
                </div>
                <div class="col-md-2 py-1">
                  <button class="btn btn-outline-primary btn-sm br25" type="button" (click)="colapsarFiltros()" style="border: 0px;">
                    <span class="col-md-1 text-center">
                      <i *ngIf="!_collapseFiltros" class="fa-solid fa-arrow-down"></i>
                      <i *ngIf="_collapseFiltros" class="fa-solid fa-arrow-up"></i>
                    </span>
                  </button>
                </div>
                <div class="col-md-2 py-1">
                  <button class="btn btn-outline-primary btn-sm br25" type="button" (click)="eliminarFiltros()" style="border: 0px;">
                    <span class="col-md-1 text-center">
                      <i class="fa-solid fa-eraser"></i>
                    </span>
                  </button>
                </div>
              </div>
              

              <div *ngFor="let filtroEstatus of _filtrosSeleccionados.lstEstatus">
                <span class="badge text-primary">
                  {{filtroEstatus.Descripcion}}
                  <button type="button" class="btn btn-primary p-0 m-0 br25" (click)="removerFiltroEstatus(filtroEstatus)" style="width:20px; height:20px; line-height: 0 !important;">
                    <i class="fa fa-xmark" style="font-size: 10px;" ></i>
                  </button>
                </span>
              </div>

              <div *ngFor="let filtroTP of _filtrosSeleccionados.lstTiposPropiedad">
                <span class="badge text-primary">
                  {{filtroTP.Descripcion}}
                  <button type="button" class="btn btn-primary p-0 m-0 br25" (click)="removerFiltroTipoPropiedad(filtroTP)" style="width:20px; height:20px; line-height: 0 !important;">
                    <i class="fa fa-xmark" style="font-size: 10px;" ></i>
                  </button>
                </span>
              </div>

              <div *ngFor="let filtroTO of _filtrosSeleccionados.lstTiposOperacion">
                <span class="badge text-primary">
                  {{filtroTO.Descripcion}}
                  <button type="button" class="btn btn-primary p-0 m-0 br25" (click)="removerFiltroTipoOperacion(filtroTO)" style="width:20px; height:20px; line-height: 0 !important;">
                    <i class="fa fa-xmark" style="font-size: 10px;" ></i>
                  </button>
                </span>
              </div>

              <div *ngFor="let filtroEstado of _filtrosSeleccionados.lstEstados">
                <span class="badge text-primary">
                  Estado: {{filtroEstado.Nombre}}
                  <button type="button" class="btn btn-primary p-0 m-0 br25" (click)="removerFiltroEstados(filtroEstado)" style="width:20px; height:20px; line-height: 0 !important;">
                    <i class="fa fa-xmark" style="font-size: 10px;" ></i>
                  </button>
                </span>
              </div>

              <div *ngFor="let filtroMunicipio of _filtrosSeleccionados.lstMunicipios">
                <span class="badge text-primary">
                  Municipio: {{filtroMunicipio.Municipio}}
                  <button type="button" class="btn btn-primary p-0 m-0 br25" (click)="removerFiltroMunicipios(filtroMunicipio)" style="width:20px; height:20px; line-height: 0 !important;">
                    <i class="fa fa-xmark" style="font-size: 10px;" ></i>
                  </button>
                </span>
              </div>

              <div *ngFor="let filtroAsentamiento of _filtrosSeleccionados.lstAsentamientos">
                <span class="badge text-primary">
                  Asentamiento: {{filtroAsentamiento.Asentamiento}}
                  <button type="button" class="btn btn-primary p-0 m-0 br25" (click)="removerFiltroAsentamientos(filtroAsentamiento)" style="width:20px; height:20px; line-height: 0 !important;">
                    <i class="fa fa-xmark" style="font-size: 10px;" ></i>
                  </button>
                </span>
              </div>

              <div class="accordion mb-2 p-1" id="accordionPanelsStayOpenExample">
                <div class="accordion-item color-modal" [ngStyle]="{'display': !_verFiltros.Estatus ? 'none' : '' }">
                  <h2 class="accordion-header" id="panelsStayOpen-headingOne">
                    <button #myColapseFiltro1 class="accordion-button p-2 text-primary color-collapse" type="button" (click)="colapseEstatus()" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="false" aria-controls="panelsStayOpen-collapseOne">
                      Estatus del aviso
                    </button>
                  </h2>
                  <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingOne">
                    <div class="accordion-body p-2">
                      <div *ngFor="let item of _publicacionesFiltros.lstEstatus">
                        <span class="badge text-primary" (click)="seleccionarFiltroEstatus(item)" style="cursor: pointer" >
                            {{item.Descripcion}} ({{item.Cantidad}})
                        </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="accordion-item color-modal" [ngStyle]="{'display': !_verFiltros.TipoPropiedad ? 'none' : '' }">
                  <h2 class="accordion-header" id="panelsStayOpen-headingTwo">
                    <button #myColapseFiltro2 class="accordion-button p-2 text-primary color-collapse collapsed" type="button" (click)="colapseTipoPropiedad()" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="false" aria-controls="panelsStayOpen-collapseTwo">
                      Tipo de inmueble
                    </button>
                  </h2>
                  <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingTwo">
                    <div class="accordion-body p-2">
                      <div *ngFor="let item of _publicacionesFiltros.lstTiposPropiedad">
                        <span class="badge text-primary" (click)="seleccionarFiltroTipoPropiedad(item)" style="cursor: pointer" >
                            {{item.Descripcion}} ({{item.Cantidad}})
                        </span>
                    </div>
                    </div>
                  </div>
                </div>

                <div class="accordion-item color-modal" [ngStyle]="{'display': !_verFiltros.TipoOperacion ? 'none' : '' }">
                  <h2 class="accordion-header" id="panelsStayOpen-headingThree">
                    <button #myColapseFiltro3 class="accordion-button p-2 text-primary color-collapse collapsed" type="button" (click)="colapseTipoOperacion()" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="false" aria-controls="panelsStayOpen-collapseThree">
                      Tipo de Operaci√≥n
                    </button>
                  </h2>
                  <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingThree">
                    <div class="accordion-body p-2">
                      <div *ngFor="let item of _publicacionesFiltros.lstTiposOperacion">
                        <span class="badge text-primary" (click)="seleccionarFiltroTipoOperacion(item)" style="cursor: pointer" >
                            {{item.Descripcion}} ({{item.Cantidad}})
                        </span>
                    </div>
                    </div>
                  </div>
                </div>

                <div class="accordion-item color-modal" [ngStyle]="{'display': !_verFiltros.Estado ? 'none' : '' }">
                  <h2 class="accordion-header" id="panelsStayOpen-headingFour">
                    <button #myColapseFiltro4 class="accordion-button p-2 text-primary color-collapse collapsed" type="button" (click)="colapseEstado()" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseFour" aria-expanded="false" aria-controls="panelsStayOpen-collapseFour">
                      Estados
                    </button>
                  </h2>
                  <div id="panelsStayOpen-collapseFour" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingFour">
                    <div class="accordion-body p-2">
                      <div *ngFor="let item of _publicacionesFiltros.lstEstados">
                        <span class="badge text-primary" (click)="seleccionarFiltroEstado(item)" style="cursor: pointer" >
                            {{item.Nombre}} ({{item.Cantidad}})
                        </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="accordion-item color-modal" [ngStyle]="{'display': !_verFiltros.Municipio ? 'none' : '' }">
                  <h2 class="accordion-header" id="panelsStayOpen-headingFour">
                    <button #myColapseFiltro5 class="accordion-button p-2 text-primary color-collapse collapsed" type="button" (click)="colapseMunicipios()" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseFive" aria-expanded="false" aria-controls="panelsStayOpen-collapseFive">
                      Municipios
                    </button>
                  </h2>
                  <div id="panelsStayOpen-collapseFive" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingFive">
                    <div class="accordion-body p-2">
                      <div *ngFor="let municipio of _publicacionesFiltros.lstMunicipios">
                        <span class="badge text-primary" (click)="seleccionarFiltroMunicipio(municipio)" style="cursor: pointer" >
                            {{municipio.Municipio}} ({{municipio.Cantidad}})
                        </span>
                      </div>
                    </div>
                  </div>
                </div>

                <div class="accordion-item color-modal" [ngStyle]="{'display': !_verFiltros.Asentamiento ? 'none' : '' }">
                  <h2 class="accordion-header" id="panelsStayOpen-headingSix">
                    <button #myColapseFiltro6 class="accordion-button p-2 text-primary color-collapse collapsed" type="button" (click)="colapseAsentamientos()" data-bs-toggle="collapse" data-bs-target="#panelsStayOpen-collapseSix" aria-expanded="false" aria-controls="panelsStayOpen-collapseSix">
                      Asentamientos
                    </button>
                  </h2>
                  <div id="panelsStayOpen-collapseSix" class="accordion-collapse collapse" aria-labelledby="panelsStayOpen-headingSix">
                    <div class="accordion-body p-2">
                      <div *ngFor="let asentamiento of _publicacionesFiltros.lstAsentamientos">
                        <span class="badge text-primary" (click)="seleccionarFiltroAsentamiento(asentamiento)" style="cursor: pointer" >
                            {{asentamiento.Asentamiento}} ({{asentamiento.Cantidad}})
                        </span>
                      </div>
                    </div>
                  </div>
                </div>

              </div>



          </div>
        </div>
      </div>
    </div>
    

    <div *ngIf="_seRealizaBusqueda" class="d-flex justify-content-center">
      <nav aria-label="Page navigation py-0 m-0">
          <ul class="pagination pagination-lg">
            <li class="page-item" [ngStyle]="{'pointer-events': _mostrarPaginaAnterior ? 'auto' : 'none'}" >
              <button class="page-link color-text-box" style="border-radius: 30px;" (click)="obtenerPaginaAnterior()" aria-label="Previous">
                <span>&larr;</span>
              </button>
            </li>
            <li *ngFor="let pagina of _paginas" class="page-item mx-1" [class.disabled]="pagina.Activa">
              <button class="page-link color-text-box" style="border-radius: 30px;" [ngStyle]="{'border': pagina.Activa ? '1px solid #bf4080' : ''}" (click)="ejecutarConsulta(pagina.Pagina)">{{pagina.Pagina+1}}</button>
            </li>
            <li class="page-item" [ngStyle]="{'pointer-events': _mostrarPaginaSiguiente ? 'auto' : 'none'}" >
              <button class="page-link color-text-box" style="border-radius: 30px;" (click)="obtenerPaginaSiguiente()" aria-label="Next">
                <span>&rarr;</span>
              </button>
            </li>
          </ul>
        </nav>
    </div>
</div>